<!doctype html>
<html lang="id" data-theme="terang">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>Teks Simbol Unik — Ubah teks biasa jadi gaya unik & simbol keren</title>
  <meta name="description" content="Aplikasi web offline untuk mengubah teks biasa menjadi berbagai gaya unik: bold, italic, fraktur, skrip, monospace, superscript, subscript, enclosed, terbalik, zalgo, dan lainnya. Semua proses di perangkat Anda.">
  <meta property="og:title" content="Teks Simbol Unik">
  <meta property="og:description" content="Ubah teks biasa jadi gaya unik & simbol keren secara instan. 100% offline.">
  <meta property="og:type" content="website">
  <style>
    :root{
      --bg:#ffffff;
      --fg:#0f172a;
      --muted:#64748b;
      --card:#f8fafc;
      --accent:#7c3aed;
      --accent-2:#22c55e;
      --ring: rgba(124,58,237,.35);
      --shadow:0 8px 24px rgba(2,6,23,.08);
      --radius:18px;
      --radius-sm:12px;
      --focus:0 0 0 3px var(--ring);
      --border:#e2e8f0;
    }
    html[data-theme="gelap"]{
      --bg:#0b1020;
      --fg:#e5e7eb;
      --muted:#9aa4b2;
      --card:#121831;
      --accent:#a78bfa;
      --accent-2:#34d399;
      --ring: rgba(167,139,250,.35);
      --shadow:0 8px 24px rgba(0,0,0,.35);
      --border:#1f2937;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;
      background:var(--bg); color:var(--fg); line-height:1.5; -webkit-tap-highlight-color: transparent;
    }
    a{color:inherit}
    .container{
      width:100%; max-width:1100px; margin-inline:auto; padding:16px; padding-bottom:96px;
    }
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px; margin:8px 0 12px;
    }
    .title-wrap h1{margin:0; font-size:clamp(20px,4vw,28px); letter-spacing:.2px}
    .title-wrap p{margin:4px 0 0; color:var(--muted); font-size:14px}
    .icon-btn{
      border:1px solid var(--border); background:transparent; color:var(--fg); border-radius:999px;
      display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 14px; cursor:pointer;
      box-shadow:var(--shadow);
    }
    .icon-btn:focus-visible{outline:none; box-shadow:var(--focus)}
    .layout{
      display:grid; grid-template-columns:1fr; gap:16px;
    }
    @media (min-width: 980px){
      .layout{grid-template-columns: 300px 1fr}
    }
    /* Panel & Cards */
    .panel,.options,.card{
      background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
    }
    .panel{padding:16px}
    .panel h2, .options h2{margin:0 0 8px; font-size:16px}
    .muted{color:var(--muted); font-size:13px}
    label{font-size:14px}
    textarea{
      width:100%; min-height:120px; resize:vertical; padding:12px 14px; border-radius:var(--radius-sm);
      border:1px solid var(--border); background:#fff0; color:var(--fg); font-size:16px
    }
    textarea:focus-visible{outline:none; box-shadow:var(--focus)}
    .controls{display:flex; flex-wrap:wrap; gap:8px; margin-top:10px}
    .btn{
      appearance:none; border:1px solid var(--border); background:#fff0; color:var(--fg);
      padding:10px 14px; border-radius:12px; cursor:pointer; transition:transform .02s ease;
    }
    .btn.primary{background:var(--accent); border-color:transparent; color:white}
    .btn.success{background:var(--accent-2); color:#041; border-color:transparent}
    .btn:active{transform:scale(.98)}
    .btn:disabled{opacity:.5; cursor:not-allowed}
    .row{display:flex; align-items:center; justify-content:space-between; gap:8px}
    .small{font-size:12px}
    .badge{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px dashed var(--border); color:var(--muted)}
    .grid{
      display:grid; grid-template-columns:1fr; gap:12px;
    }
    @media (min-width:640px){ .grid{grid-template-columns: 1fr 1fr} }
    @media (min-width:960px){ .grid{grid-template-columns: 1fr 1fr 1fr} }
    .card{padding:14px; display:flex; flex-direction:column; gap:10px}
    .card-head{display:flex; align-items:center; justify-content:space-between; gap:10px}
    .card h3{margin:0; font-size:14px}
    .result{min-height:36px; padding:10px; border-radius:10px; border:1px dashed var(--border); font-size:16px; overflow-wrap:anywhere}
    .tools{display:flex; gap:8px; flex-wrap:wrap}
    .actions-bar{position:sticky; bottom:12px; margin-top:8px; display:flex; gap:8px; flex-wrap:wrap; z-index:5}
    .actions-bar .btn{box-shadow:var(--shadow)}
    /* Options */
    .options{padding:12px}
    .options details{border:1px solid var(--border); border-radius:12px; overflow:hidden; background:transparent}
    .options summary{list-style:none; padding:12px 14px; cursor:pointer; outline:none; display:flex; align-items:center; justify-content:space-between}
    .options summary::-webkit-details-marker{display:none}
    .opt-grid{display:grid; grid-template-columns:1fr; gap:12px; padding:12px}
    @media (min-width:980px){
      .options details{border:none}
      .options summary{display:none}
      .opt-grid{padding:4px}
    }
    select, input[type="checkbox"], input[type="radio"], input[type="range"]{
      accent-color: var(--accent);
    }
    .field{display:grid; gap:6px}
    .row-wrap{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .group{border:1px solid var(--border); padding:10px; border-radius:12px}
    .char-count{font-variant-numeric: tabular-nums}
    .toast{
      position:fixed; left:50%; transform:translateX(-50%); bottom:20px; background:var(--fg); color:var(--bg);
      padding:10px 14px; border-radius:999px; opacity:0; pointer-events:none; transition:opacity .25s, translate .25s;
    }
    .toast.show{opacity:1}
    footer{margin-top:28px; color:var(--muted); font-size:13px}
    .sr-only{position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
    .hint{font-size:12px; color:var(--muted)}
    .label-inline{display:flex; align-items:center; gap:8px}
  </style>
</head>
<body>
  <div class="container" role="application">
    <header aria-label="Kepala Halaman">
      <div class="title-wrap">
        <h1>Teks Simbol Unik</h1>
        <p>Ubah teks biasa jadi gaya unik & simbol keren secara instan.</p>
      </div>
      <button id="themeBtn" class="icon-btn" type="button" aria-label="Ubah tema terang/gelap">
        <svg aria-hidden="true" width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M12 3a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V4a1 1 0 0 1 1-1Zm0 15a5 5 0 1 0 0-10 5 5 0 0 0 0 10Zm8-6a1 1 0 0 1-1 1h-1a1 1 0 1 1 0-2h1a1 1 0 0 1 1 1ZM6 12a1 1 0 0 1-1 1H4a1 1 0 1 1 0-2h1a1 1 0 0 1 1 1Zm11.657 6.657a1 1 0 0 1-1.414 0l-.707-.707a1 1 0 1 1 1.414-1.414l.707.707a1 1 0 0 1 0 1.414ZM7.464 7.464a1 1 0 0 1-1.414 0l-.707-.707A1 1 0 0 1 6.757 5.343l.707.707a1 1 0 0 1 0 1.414Zm10.193-2.121a1 1 0 0 1 0 1.414l-.707.707A1 1 0 0 1 15.536 6.05l.707-.707a1 1 0 0 1 1.414 0ZM7.464 16.536a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 5.343 17.95l.707-.707a1 1 0 0 1 1.414 0Z" stroke="currentColor" stroke-width="1.6"/>
        </svg>
        <span class="small">Tema</span>
      </button>
    </header>

    <div class="layout">
      <!-- OPTIONS -->
      <aside class="options" aria-label="Opsi dan Filter">
        <details open>
          <summary><strong>Opsi &amp; Filter</strong><span class="small muted">Ketuk untuk buka/tutup</span></summary>
          <div class="opt-grid" role="group" aria-labelledby="opsiLabel">
            <div class="field">
              <label for="gayaSel"><strong>Pilih gaya</strong></label>
              <select id="gayaSel" aria-describedby="gayaHint">
                <option value="semua">— Semua Gaya —</option>
                <optgroup label="Fancy Alphabet (Mathematical)">
                  <option value="fancy:bold">Bold</option>
                  <option value="fancy:italic">Italic</option>
                  <option value="fancy:bolditalic">Bold Italic</option>
                  <option value="fancy:script">Script</option>
                  <option value="fancy:fraktur">Fraktur</option>
                  <option value="fancy:double">Double-Struck</option>
                  <option value="fancy:sans">Sans</option>
                  <option value="fancy:sansbold">Sans Bold</option>
                  <option value="fancy:sansitalic">Sans Italic</option>
                  <option value="fancy:sansbolditalic">Sans Bold Italic</option>
                  <option value="fancy:mono">Monospace</option>
                </optgroup>
                <optgroup label="Enclosed (Huruf di dalam)">
                  <option value="enclosed:circled">Lingkaran</option>
                  <option value="enclosed:squared">Kotak</option>
                </optgroup>
                <optgroup label="Sup/Sub &amp; Kecil Besar">
                  <option value="super:super">Superscript</option>
                  <option value="super:sub">Subscript</option>
                  <option value="other:smallcaps">Small Caps</option>
                </optgroup>
                <optgroup label="Balik &amp; Zalgo">
                  <option value="other:reverse">Dibalik (Reverse)</option>
                  <option value="other:flip">Terbalik (Upside-Down)</option>
                  <option value="other:zalgo">Zalgo</option>
                </optgroup>
              </select>
              <div id="gayaHint" class="hint">Saring tampilan berdasarkan kategori gaya.</div>
            </div>

            <div class="group">
              <div class="field">
                <label class="label-inline"><input type="checkbox" id="hiasanCbx"> Tambahkan hiasan (prefix &amp; suffix)</label>
                <label class="label-inline"><input type="checkbox" id="emojiCbx"> Tambahkan emoji acak (maks 2)</label>
                <label class="label-inline"><input type="checkbox" id="cleanCbx"> Hapus spasi ganda &amp; baris kosong</label>
                <label class="label-inline"><input type="checkbox" id="avoidCbx"> Hindari karakter sulit dibaca (0/O, 1/I, l/|)</label>
              </div>
              <div class="field" style="margin-top:8px">
                <label><strong>Format huruf</strong></label>
                <div class="row-wrap" role="radiogroup" aria-label="Format huruf">
                  <label class="label-inline"><input type="radio" name="casefmt" value="asli" checked> Asli</label>
                  <label class="label-inline"><input type="radio" name="casefmt" value="upper"> KAPITAL</label>
                  <label class="label-inline"><input type="radio" name="casefmt" value="lower"> kecil</label>
                  <label class="label-inline"><input type="radio" name="casefmt" value="title"> Judul</label>
                </div>
              </div>
            </div>

            <div class="group">
              <div class="field">
                <label for="zalgoRange"><strong>Zalgo</strong> <span class="muted small">(intensitas)</span></label>
                <input id="zalgoRange" type="range" min="0" max="3" value="1" step="1" aria-label="Intensitas Zalgo">
                <div class="hint">0=nonaktif, 1=ringan (default), 2=sedang, 3=ekstrem.</div>
              </div>
            </div>

            <div class="group">
              <div class="field">
                <span class="badge" aria-live="polite">Preferensi disimpan otomatis (localStorage)</span>
              </div>
            </div>
          </div>
        </details>
      </aside>

      <!-- MAIN -->
      <main>
        <section class="panel" aria-label="Panel Input">
          <h2>Masukan Teks</h2>
          <label class="sr-only" for="teks">Teks asli</label>
          <textarea id="teks" placeholder="Tulis teks di sini…" aria-describedby="infoPrivasi"></textarea>
          <div class="row" style="margin-top:6px">
            <div class="small muted char-count" id="count">0 karakter</div>
            <div class="badge" id="infoPrivasi">Semua proses di perangkat Anda (offline), tidak ada data yang dikirim.</div>
          </div>
          <div class="controls" role="group" aria-label="Tombol tindakan">
            <button class="btn" id="clearBtn" type="button">Bersihkan</button>
            <button class="btn" id="pasteBtn" type="button">Tempel</button>
            <button class="btn" id="copyRawBtn" type="button">Salin Teks Asli</button>
          </div>
        </section>

        <section aria-label="Hasil &amp; Preview" style="margin-top:10px">
          <div class="row" style="margin-bottom:10px">
            <h2 style="margin:0">Hasil</h2>
            <span class="muted small">Klik “Salin” pada kartu untuk menyalin satu gaya.</span>
          </div>

          <div class="grid" id="grid" aria-live="polite" aria-busy="false"></div>

          <div class="actions-bar" role="group" aria-label="Aksi global">
            <button class="btn primary" id="copyAllBtn" type="button">Salin Semua</button>
            <button class="btn" id="shuffleBtn" type="button">Acak Variasi</button>
            <button class="btn success" id="downloadBtn" type="button">Unduh .txt</button>
          </div>
        </section>
      </main>
    </div>

    <footer>
      <p><strong>Tips:</strong> Tidak semua perangkat mendukung setiap simbol Unicode. Jika ada kotak/□ muncul, coba pilih gaya lain. Simbol dapat terlihat berbeda pada Android, iOS, dan desktop.</p>
      <p>&copy; <span id="year"></span> Teks Simbol Unik — v1.0 • Dibuat untuk bekerja 100% offline.</p>
    </footer>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite">Disalin ke clipboard!</div>

  <script>
  (function(){
    "use strict";

    // ========= Utilitas DOM & State =========
    const $ = (q, el=document)=>el.querySelector(q);
    const $$ = (q, el=document)=>[...el.querySelectorAll(q)];
    const els = {
      html: document.documentElement,
      themeBtn: $('#themeBtn'),
      teks: $('#teks'),
      count: $('#count'),
      clearBtn: $('#clearBtn'),
      pasteBtn: $('#pasteBtn'),
      copyRawBtn: $('#copyRawBtn'),
      grid: $('#grid'),
      copyAllBtn: $('#copyAllBtn'),
      shuffleBtn: $('#shuffleBtn'),
      downloadBtn: $('#downloadBtn'),
      gayaSel: $('#gayaSel'),
      zalgoRange: $('#zalgoRange'),
      hiasanCbx: $('#hiasanCbx'),
      emojiCbx: $('#emojiCbx'),
      cleanCbx: $('#cleanCbx'),
      avoidCbx: $('#avoidCbx'),
      toast: $('#toast'),
      year: $('#year')
    };
    els.year.textContent = new Date().getFullYear();

    const LSKEY = 'tsu_prefs_v1';
    let debounceTimer = null;
    let randomSalt = Math.random();

    // ========= Data: Emoji & Hiasan =========
    const EMOJIS = ["✨","🌟","💫","🔥","🌈","⭐️","⚡️","🎯","💎","🎉","🎵","🪄","🧩","🔮","💖","🖤","🌀","🧿","🌙","☀️","🌸","🌼","🍀","🧠","🎮","🚀"];
    const HIASAN = [
      "───✦───","★☆★","❖✦❖","⋆｡°✩","•⩊•","✦✧✦","✺✺✺","✿❀✿","─╯","╰─","=͟͟͞͞➳","✱✱✱","✧͢","꧁꧂","༺༻","⟡","✦⋆","≛"
    ];

    // ========= Zalgo Marks =========
    const zalgoUp = ["\u030d","\u030e","\u0304","\u0305","\u033f","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030a","\u0342","\u0343","\u0344","\u034a","\u034b","\u034c","\u0303","\u0302","\u030c","\u0350","\u0300","\u0301","\u030b","\u030f","\u0312","\u0313","\u0314","\u033d","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036a","\u036b","\u036c","\u036d","\u036e","\u036f","\u033e","\u035b","\u0346","\u031a"];
    const zalgoMid = ["\u0315","\u031b","\u0340","\u0341","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u034f","\u035c","\u035d","\u035e","\u035f","\u0360","\u0362","\u0338","\u0337","\u0361","\u0489"];
    const zalgoDown = ["\u0316","\u0317","\u0318","\u0319","\u031c","\u031d","\u031e","\u031f","\u0320","\u0324","\u0325","\u0326","\u0329","\u032a","\u032b","\u032c","\u032d","\u032e","\u032f","\u0330","\u0331","\u0332","\u0333","\u0339","\u033a","\u033b","\u033c","\u0345","\u0347","\u0348","\u0349","\u034d","\u034e","\u0353","\u0354","\u0355","\u0356"];

    // ========= Mapping Fancy =========
    const rangeMap = (upperStart, lowerStart)=>{
      const up=[], low=[];
      for(let i=0;i<26;i++){ up.push(String.fromCodePoint(upperStart+i)); low.push(String.fromCodePoint(lowerStart+i)); }
      return {up, low};
    };
    const MAPS = {
      bold: rangeMap(0x1d400,0x1d41a),
      italic: rangeMap(0x1d434,0x1d44e),
      bolditalic: rangeMap(0x1d468,0x1d482),
      sans: rangeMap(0x1d5a0,0x1d5ba),
      sansbold: rangeMap(0x1d5d4,0x1d5ee),
      sansitalic: rangeMap(0x1d608,0x1d622),
      sansbolditalic: rangeMap(0x1d63c,0x1d656),
      mono: rangeMap(0x1d670,0x1d68a),
      // non-contiguous sets: define explicit arrays
      script: {
        up:[..."𝒜ℬ𝒞𝒟ℰℱ𝒢ℋℐ𝒥𝒦ℒℳ𝒩𝒪𝒫𝒬ℛ𝒮𝒯𝒰𝒱𝒲𝒳𝒴𝒵"],
        low:[..."𝒶𝒷𝒸𝒹ℯ𝒻ℊ𝒽𝒾𝒿𝓀𝓁𝓂𝓃ℴ𝓅𝓆𝓇𝓈𝓉𝓊𝓋𝓌𝓍𝓎𝓏"]
      },
      fraktur: {
        up:[..."𝔄𝔅ℭ𝔇𝔈𝔉𝔊ℌℑ𝔍𝔎𝔏𝔐𝔑𝔒𝔓𝔔ℜ𝔖𝔗𝔘𝔙𝔚𝔛𝔜ℨ"],
        low:[..."𝔞𝔟𝔠𝔡𝔢𝔣𝔤𝔥𝔦𝔧𝔨𝔩𝔪𝔫𝔬𝔭𝔮𝔯𝔰𝔱𝔲𝔳𝔴𝔵𝔶𝔷"]
      },
      double: {
        up:[..."𝔸𝔹ℂ𝔻𝔼𝔽𝔾ℍ𝕀𝕁𝕂𝕃𝕄ℕ𝕆ℙℚℝ𝕊𝕋𝕌𝕍𝕎𝕏𝕐ℤ"],
        low:[..."𝕒𝕓𝕔𝕕𝕖𝕗𝕘𝕙𝕚𝕛𝕜𝕝𝕞𝕟𝕠𝕡𝕢𝕣𝕤𝕥𝕦𝕧𝕨𝕩𝕪𝕫"]
      },
      // Enclosed
      circled: {
        up:[..."ⒶⒷⒸⒹⒺⒻⒼⒽⒾⒿⓀⓁⓂⓃⓄⓅⓆⓇⓈⓉⓊⓋⓌⓍⓎⓏ"],
        low:[..."ⓐⓑⓒⓓⓔⓕⓖⓗⓘⓙⓚⓛⓜⓝⓞⓟⓠⓡⓢⓣⓤⓥⓦⓧⓨⓩ"]
      },
      squared: {
        up:[..."🄰🄱🄲🄳🄴🄵🄶🄷🄸🄹🄺🄻🄼🄽🄾🄿🅀🅁🅂🅃🅄🅅🅆🅇🅈🅉"],
        low:null // fallback to uppercase
      },
      // Small Caps (approx)
      smallcaps: {
        up:[..."ᴬᴮᶜᴰᴱᶠᴳᴴᴵᴶᴷᴸᴹᴺᴼᴾᵠᴿˢᵀᵁⱽᵂˣʸᶻ"].map((c,i)=>({c,i})).map(x=>x.c), // not perfect; will fallback where missing
        low:[..."ᴀʙᴄᴅᴇꜰɢʜɪᴊᴋʟᴍɴᴏᴘǫʀsᴛᴜᴠᴡxʏᴢ"]
      }
    };

    // Superscript/Subscript Maps (letters subset + digits)
    const SUPER = Object.assign({
      a:"ᵃ",b:"ᵇ",c:"ᶜ",d:"ᵈ",e:"ᵉ",f:"ᶠ",g:"ᵍ",h:"ʰ",i:"ⁱ",j:"ʲ",k:"ᵏ",l:"ˡ",m:"ᵐ",n:"ⁿ",o:"ᵒ",p:"ᵖ",r:"ʳ",s:"ˢ",t:"ᵗ",u:"ᵘ",v:"ᵛ",w:"ʷ",x:"ˣ",y:"ʸ",z:"ᶻ"
    }, {"0":"⁰","1":"¹","2":"²","3":"³","4":"⁴","5":"⁵","6":"⁶","7":"⁷","8":"⁸","9":"⁹"});
    const SUB = Object.assign({
      a:"ₐ",e:"ₑ",h:"ₕ",i:"ᵢ",j:"ⱼ",k:"ₖ",l:"ₗ",m:"ₘ",n:"ₙ",o:"ₒ",p:"ₚ",r:"ᵣ",s:"ₛ",t:"ₜ",u:"ᵤ",v:"ᵥ",x:"ₓ"
    }, {"0":"₀","1":"₁","2":"₂","3":"₃","4":"₄","5":"₅","6":"₆","7":"₇","8":"₈","9":"₉"});

    // Upside-Down map
    const FLIP = {
      a:"ɐ", b:"q", c:"ɔ", d:"p", e:"ǝ", f:"ɟ", g:"ƃ", h:"ɥ", i:"ᴉ", j:"ɾ", k:"ʞ", l:"ʃ", m:"ɯ", n:"u",
      o:"o", p:"d", q:"b", r:"ɹ", s:"s", t:"ʇ", u:"n", v:"ʌ", w:"ʍ", x:"x", y:"ʎ", z:"z",
      A:"∀", B:"𐐒", C:"Ɔ", D:"◖", E:"Ǝ", F:"Ⅎ", G:"פ", H:"H", I:"I", J:"ſ", K:"ʞ", L:"˥", M:"W",
      N:"N", O:"O", P:"Ԁ", Q:"Ό", R:"ᴚ", S:"S", T:"⊥", U:"∩", V:"Λ", W:"M", X:"X", Y:"⅄", Z:"Z",
      "1":"Ɩ","2":"ᄅ","3":"Ɛ","4":"ㄣ","5":"ϛ","6":"9","7":"ㄥ","8":"8","9":"6","0":"0",
      ".":"˙",",":"'", "'":",", '"':"„","!":"¡","?":"¿","&":"⅋","_":"‾","`":",","(" :")", ")":"(",
      "[":"]", "]":"[","{":"}","}":"{","<":">",">":"<"
    };

    // Disambiguation (make confusable chars more distinct)
    const AVOID_MAP = {
      "O":"Ơ","o":"ơ","0":"⓪","I":"ɪ","l":"ʟ","|":"¦","1":"①"
    };

    // ========= Helper Functions =========
    const escapeHTML = (s)=>s.replace(/[&<>"']/g, m=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;" }[m]));
    const toTitleCase = (s)=>s.replace(/\S+/g,w=>w[0]? w[0].toUpperCase()+w.slice(1).toLowerCase():w);
    const applyCase = (s, mode)=>{
      if(mode==="upper") return s.toUpperCase();
      if(mode==="lower") return s.toLowerCase();
      if(mode==="title") return toTitleCase(s);
      return s;
    };
    const cleanSpaces = (s)=>{
      return s.replace(/[ \t]+/g,' ').replace(/\n{3,}/g,'\n\n').replace(/[ \t]+\n/g,'\n').replace(/\n[ \t]+
